# 🤖 AI咨询平台

一个基于RAG（检索增强生成）技术的智能咨询平台，支持多种文档格式的智能问答。

## ✨ 主要特性

- 🧠 **智能RAG系统** - 使用BGE模型进行文档向量化和检索
- 📄 **多格式支持** - 支持PDF、Word、Excel、PPT等文档格式
- 🔍 **高级文档处理** - OCR识别、表格提取、图像处理
- 🌐 **现代化界面** - 基于Next.js的响应式Web界面
- ⚡ **高性能** - FAISS向量数据库，支持快速检索
- 🔒 **安全可靠** - 本地模型部署，数据隐私保护

## 🚀 快速开始

### 系统要求

- Ubuntu 18.04+ / CentOS 7+
- Python 3.8+
- Node.js 18+
- Nginx
- 8GB+ RAM (推荐)

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd consult
```

2. **系统安装**
```bash
sudo ./setup.sh
```

3. **配置环境变量**
```bash
# 编辑后端配置文件
vim backend/.env

# 设置API密钥
THIRD_PARTY_API_KEY=your_api_key_here
```

4. **启动系统**
```bash
./start.sh
```

5. **访问系统**
- 前端界面: http://localhost:13000
- 后端API: http://localhost:18000

## 📖 使用指南

### 文档管理

1. **上传文档** - 在数据库管理页面上传PDF、Word等文档
2. **文档处理** - 系统自动进行OCR、表格提取等处理
3. **向量化** - 文档内容自动向量化并存储到FAISS数据库

### 智能问答

1. **选择工作区** - 在输出面板选择对应的工作区
2. **输入问题** - 输入您的问题
3. **获取答案** - 系统基于文档内容生成智能回答

### 工作区管理

- **创建工作区** - 创建新的工作区来组织文档
- **文档分类** - 将相关文档归类到同一工作区
- **批量操作** - 支持批量上传和管理文档

## 🛠️ 系统管理

### 启动/停止服务

```bash
# 启动所有服务
./start.sh

# 停止所有服务
./stop.sh

# 重启所有服务
./restart.sh

# 检查系统状态
./status.sh
```

### 日志查看

```bash
# 系统日志
tail -f system.log

# 前端日志
tail -f frontend.log

# Nginx日志
tail -f /var/log/nginx/access.log
```

### 服务端口

- **前端界面**: 13000 (通过Nginx代理)
- **前端开发服务器**: 3000
- **后端API**: 18000
- **Nginx**: 80

## 🔧 技术架构

### 后端技术栈

- **FastAPI** - 高性能Web框架
- **LangChain** - RAG框架
- **FAISS** - 向量数据库
- **BGE模型** - 中文文本向量化
- **Unstructured** - 文档解析
- **PyTesseract** - OCR识别

### 前端技术栈

- **Next.js** - React框架
- **TypeScript** - 类型安全
- **Tailwind CSS** - 样式框架
- **SWR** - 数据获取

### 系统架构

```
用户浏览器
    ↓
Nginx (反向代理)
    ↓
前端服务 (Next.js)
    ↓
后端API (FastAPI)
    ↓
RAG服务 + 向量数据库
```

## 📊 性能优化

### 向量化优化

- **BGE模型** - 1024维向量，中文效果优秀
- **批量处理** - 支持批量文档向量化
- **缓存机制** - 向量结果缓存，提高检索速度

### 文档处理优化

- **异步处理** - 文档处理不阻塞主线程
- **智能分块** - 根据内容类型优化分块策略
- **质量检查** - 自动检查文档处理质量

## 🔒 安全特性

### 数据安全

- **本地部署** - 数据不离开本地环境
- **离线模式** - 支持完全离线运行
- **访问控制** - 基于工作区的访问控制

### 系统安全

- **HTTPS支持** - 支持SSL/TLS加密
- **CORS配置** - 跨域请求安全控制
- **输入验证** - 严格的输入参数验证

## 🐛 故障排除

### 常见问题

1. **服务启动失败**
   - 检查端口占用: `netstat -tlnp`
   - 查看日志文件: `tail -f system.log`
   - 检查依赖安装: `./setup.sh`

2. **文档上传失败**
   - 检查文件大小限制 (50M)
   - 检查文件格式支持
   - 查看后端日志

3. **RAG问答异常**
   - 检查向量数据库状态
   - 验证API密钥配置
   - 查看模型加载状态

### 日志分析

- **系统日志** - 服务启动和运行状态
- **前端日志** - 客户端错误和请求
- **Nginx日志** - 请求处理和代理状态

## 📈 性能监控

### 系统指标

- **CPU使用率** - 监控系统负载
- **内存使用** - 监控内存占用
- **磁盘空间** - 监控存储使用

### 应用指标

- **响应时间** - API响应延迟
- **文档处理速度** - 文档处理效率
- **向量检索精度** - RAG检索质量

## 🤝 贡献指南

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📄 许可证

本项目采用MIT许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 支持

如有问题或建议，请通过以下方式联系：

- 提交Issue
- 发送邮件
- 技术交流群

---

**AI咨询平台** - 让文档智能问答变得简单高效 🚀
